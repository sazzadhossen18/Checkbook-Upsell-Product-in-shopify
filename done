Step 1:
====


<style>
Â  .product-addon-container-gm {
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  gap: 20px;
Â  Â  max-width: 100%;
Â  Â  background-color: {{ addon_bg }};Â 
Â  Â  padding: 20px;
Â  Â  border-radius: 5px;
Â  Â  box-sizing: border-box;
Â  }


Â  .product-addon-container-gm .product-addon-item {
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  gap: 10px;
Â  }


Â  .product-addon-container-gm .product-addon-item .product-addon-checkbox {
Â  Â  cursor: pointer;
Â  Â  accent-color: {{ checkbox_active_color }};
Â  }


Â  .product-addon-image {
Â  Â  width: {{ image_size }}px;
Â  Â  height: {{ image_size }}px;
Â  Â  object-fit: cover;
Â  Â  border-radius: {{ image_type }}%;
Â  }


Â  .product-addon-details {
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  justify-content: center;
Â  }


Â  .product-addon-title {
Â  Â  font-size: {{ title_size }}px;
Â  Â  font-weight: {{ font_weight }};Â 
Â  Â  color: {{ title_color }};Â 
Â  }


Â  .product-addon-price {
Â  Â  font-size: {{ price_size }}px;
Â  Â  color: {{ price_color }};Â 
Â  Â  opacity: {{ price_opacity }};Â 
Â  }


Â  @media only screen and (max-width: 600px) {
Â  Â  .product-addon-image {
Â  Â  Â  width: {{ image_size_mb }}px;
Â  Â  Â  height: {{ image_size_mb }}px;
Â  Â  }
Â  Â  .product-addon-title {
Â  Â  Â  font-size: {{ title_size_mb }}px;
Â  Â  }
Â  Â  .product-addon-price {
Â  Â  Â  font-size: {{ price_size_mb }}px;
Â  Â  }
Â  }
Â Â 
</style>


<div class="product-addon-container-gm">
&nbsp; {% for product in product_addon %}
&nbsp; &nbsp; {% if product != blank and product.available %}
&nbsp; &nbsp; &nbsp; <div class="product-addon-item" data-product-id="{{ product.variants.first.id }}">
&nbsp; &nbsp; &nbsp; &nbsp; <input Â ="" style="width: {{ checkbox_size }}px !important; height: {{ checkbox_size }}px !important; min-width: {{ checkbox_size }}px !important; min-height: {{ checkbox_size }}px !important;" type="checkbox" class="product-addon-checkbox" id="product-addon-checkbox-{{ forloop.index }}" name="product-addon-checkbox-{{ forloop.index }}" data-product-id="{{ product.variants.first.id }}">
&nbsp; &nbsp; &nbsp; &nbsp; <img class="product-addon-image" src="{{ product.featured_image | image_url }}" alt="{{ product.title }}">
&nbsp; &nbsp; &nbsp; &nbsp; <div class="product-addon-details">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="product-addon-title">{{ product.title | truncatewords: 4 }}</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% if product.tags contains 'free-gift' %}
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="product-addon-price">{{ free_gift_info }}</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% else %}
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="product-addon-price">{{ product.price | money }}</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {% endif %}
&nbsp; &nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; &nbsp; </div>
&nbsp; &nbsp; {% endif %}
&nbsp; {% endfor %}
</div>






<script>
document.addEventListener('DOMContentLoaded', () => {
Â  const checkboxes = document.querySelectorAll('.product-addon-checkbox');


Â  checkboxes.forEach((checkbox) => {
Â  Â  checkbox.addEventListener('change', () => {
Â  Â  Â  const productId = checkbox.getAttribute('data-product-id');


Â  Â  Â  if (checkbox.checked) {
Â  Â  Â  Â  // Add the product to the cart
Â  Â  Â  Â  fetch('/cart/add.js', {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  body: JSON.stringify({
Â  Â  Â  Â  Â  Â  id: productId,
Â  Â  Â  Â  Â  Â  quantity: 1
Â  Â  Â  Â  Â  })
Â  Â  Â  Â  })
Â  Â  Â  Â  .then((response) => response.json())
Â  Â  Â  Â  .then((data) => {
Â  Â  Â  Â  Â  console.log('Product added to cart:', data);


Â  Â  Â  Â  Â  // Check cart type and redirect accordingly
Â  Â  Â  Â  Â  const cartType = Shopify.theme.settings.cart_type; // Assuming 'cart_type' is set in theme settings
Â  Â  Â  Â  Â  if (cartType === 'page') {
Â  Â  Â  Â  Â  Â  // Redirect to cart page
Â  Â  Â  Â  Â  Â  window.location.href = routes.cart_url;
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // Open the cart drawer for other cart types
Â  Â  Â  Â  Â  Â  const cartDrawer = document.querySelector('cart-drawer');
Â  Â  Â  Â  Â  Â  if (cartDrawer) {
Â  Â  Â  Â  Â  Â  Â  cartDrawer.classList.remove('is-empty');
Â  Â  Â  Â  Â  Â  Â  fetch('/cart?view=drawer')
Â  Â  Â  Â  Â  Â  Â  Â  .then(response => response.text())
Â  Â  Â  Â  Â  Â  Â  Â  .then(html => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const tempDiv = document.createElement('div');
Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  tempDiv.innerHTML = html;
Â  Â  Â  Â  Â  Â  Â  Â  Â  const newDrawerContent = tempDiv.querySelector('#CartDrawer');
Â  Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector('#CartDrawer').innerHTML = newDrawerContent.innerHTML;
Â  Â  Â  Â  Â  Â  Â  Â  Â  cartDrawer.open();
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  Â  console.error('Error adding product to cart:', error);
Â  Â  Â  Â  });
Â  Â  Â  } else {
Â  Â  Â  Â  // Handle product removal if unchecked
Â  Â  Â  Â  fetch('/cart/change.js', {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  body: JSON.stringify({
Â  Â  Â  Â  Â  Â  id: productId,
Â  Â  Â  Â  Â  Â  quantity: 0
Â  Â  Â  Â  Â  })
Â  Â  Â  Â  })
Â  Â  Â  Â  .then((response) => response.json())
Â  Â  Â  Â  .then((data) => {
Â  Â  Â  Â  Â  console.log('Product removed from cart:', data);
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  Â  console.error('Error removing product from cart:', error);
Â  Â  Â  Â  });
Â  Â  Â  }
Â  Â  });
Â  });
});
</script>


Step 2: Product  Page
==============

              {% when 'product-addons' %}
                {% render 'product-addons-gm',
                  product_addon : block.settings.product_addon,
                  addon_bg : block.settings.addon_bg,
                  checkbox_active_color : block.settings.checkbox_active_color,
                  checkbox_size : block.settings.checkbox_size,
                  image_size : block.settings.image_size,
                  image_size_mb : block.settings.image_size_mb,
                  image_type : block.settings.image_type,
                  title_size : block.settings.title_size,
                  title_size_mb : block.settings.title_size_mb,
                  font_weight : block.settings.font_weight,
                  price_size : block.settings.price_size,
                  price_size_mb : block.settings.price_size_mb,
                  free_gift_info : block.settings.free_gift_info,
                  title_color : block.settings.title_color,
                  price_color : block.settings.price_color,
                  price_opacity : block.settings.price_opacity
                %}

   {
      "type": "product-addons",
      "name": "Product Addon",
      "settings": [
        {
          "type": "product_list",
          "id": "product_addon",
          "label": "Select product addons"
        },
        {
          "type": "color",
          "id": "addon_bg",
          "label": "Background color",
          "default": "#f0f8ff"
        },
        {
         "type": "color",
          "id": "checkbox_active_color",
          "label": "Active checkbox color",
          "default": "#000"
        },
         {
          "type": "range",
          "id": "checkbox_size",
          "label": "Checkbox size",
          "min": 10,
          "max": 40,
          "step": 2,
          "unit": "px",
          "default": 20
        },
        {
          "type": "range",
          "id": "image_size",
          "label": "Image size",
          "min": 32,
          "max": 100,
          "step": 4,
          "unit": "px",
          "default": 64
        },
        {
          "type": "range",
          "id": "image_size_mb",
          "label": "Image size mobile",
          "min": 32,
          "max": 100,
          "step": 4,
          "unit": "px",
          "default": 56
        },
        {
          "type": "select",
          "id": "image_type",
          "label": "Product image type",
          "options": [
            {
              "value": "5",
              "label": "Square"
            },
            {
              "value": "50",
              "label": "Circle"
            }
          ],
          "default": "5"
        },
        {
          "type": "range",
          "id": "title_size",
          "label": "Title font size",
          "min": 10,
          "max": 30,
          "step": 2,
          "unit": "px",
          "default": 14
        },
         {
          "type": "range",
          "id": "title_size_mb",
          "label": "Title font size mobile",
          "min": 10,
          "max": 30,
          "step": 2,
          "unit": "px",
          "default": 12
        },
        {
          "type": "select",
          "id": "font_weight",
          "label": "Font boldness",
          "options": [
            {
              "value": "normal",
              "label": "Normal"
            },
            {
              "value": "medium",
              "label": "Medium"
            },
            {
              "value": "bold",
              "label": "Bold"
            }
          ],
          "default": "bold"
        },
         {
          "type": "range",
          "id": "price_size",
          "label": "Price font size",
          "min": 10,
          "max": 30,
          "step": 2,
          "unit": "px",
          "default": 12
        },
         {
          "type": "range",
          "id": "price_size_mb",
          "label": "Price font size mobile",
          "min": 10,
          "max": 30,
          "step": 2,
          "unit": "px",
          "default": 10
        },
         {
          "type": "text",
          "id": "free_gift_info",
          "label": "Free product info",
          "info": "Buy x get y free needs to be setup first",
          "default": "ðŸ‘‰ Claim free gift"     
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Title color",
          "default": "#000"
        },
        {
          "type": "color",
          "id": "price_color",
          "label": "Price color",
          "default": "#000"
        },
        {
          "type": "range",
          "id": "price_opacity",
          "label": "Price color transparency",
          "min": 0.1,
          "max": 1,
          "step": 0.1,
          "default": 0.7
        }
      ]
    },

